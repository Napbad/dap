# **Dream**语言参考

## 一、简介

**Dream**是一种具有丰富特性的一门具有实验性质的编程语言.

## 二、词法结构

### （一）关键字

- `if`：用于条件判断，引入一个条件表达式，如果条件为真，则执行相关的代码块。
- `else`：与 `if` 配合使用，当 `if` 条件不成立时，执行 `else` 后的代码块。
- `elif`：提供了在 `if - else` 结构中的额外条件分支，允许进行多个条件的依次判断。
- `for`：构建循环结构，可按照特定的迭代规则重复执行一段代码。
- `return`：从函数中返回一个值或结束函数的执行，如果函数没有返回值，可以单独使用 `return`。
- `fun`：用于定义函数，指定函数的名称、参数列表以及函数体。
- `var`：声明可变变量，变量的值在其生命周期内可以被修改。
- `imt`：推测用于声明不可变变量，一旦初始化，其值不能被改变。
- `extern`：可能用于声明外部定义的函数或变量，以便在当前代码模块中使用。
- `struct`：定义结构体类型，用于组合多个不同类型的成员变量，创建自定义的数据结构。
- `break`：用于跳出当前的循环（如 `for` 循环）。
- `include`：用于引入外部文件或模块，可能是为了复用代码或扩展功能。
- `package`：与程序的包管理相关，用于组织代码、实现模块化编程。
- `nullable`：使用 `?` 表示，可能用于指示变量或数据类型可以容纳空值，增加数据处理的灵活性。
- `non_nullable`：由 `!` 表示，可能用于限制变量或数据类型不能为 null，有助于提高代码的安全性和确定性。

### （二）标识符

标识符用于命名变量、函数、结构体等编程实体。它必须以字母（`a - z` 或 `A - Z`）或下划线 `_` 开头，后面可以跟任意数量的字母、数字（
`0 - 9`）或下划线。例如：`my_variable`、`_private_function`、`MyStruct` 等都是合法的标识符。

### （三）常量

- **整数常量**：由一串数字组成，如 `42`、`0`、`-123` 等，表示整数值。
- **浮点数常量**：包含小数点的数字序列，如 `3.14`、`-0.5` 等，用于表示带有小数部分的数值。
- **字符串常量**：由双引号 `"` 括起来的字符序列，如 `"Hello, World!"`。字符串中可以使用转义字符，如 `\n` 表示换行，`\t`
  表示制表符等，以表示特殊字符或不可见字符。

### （四）运算符

- **算术运算符**
    - `+`：加法运算，可用于数值相加或字符串拼接（取决于语言对字符串操作的支持）。
    - `-`：减法运算，用于数值相减。
    - `*`：乘法运算，执行数值的乘法操作。
    - `/`：除法运算，对数值进行除法计算。
    - `%`：取模运算，返回两个整数相除的余数。
    - `++`：自增运算符，使变量的值增加 1，是前置自增（如 `++x`），其确切语义和优先级在不同场景下可能有细微差别。
    - `--`：自减运算符，将变量的值减少 1，前置自减（`--x`）两种形式。
    - `+=`、`-=`、`*=`、`/=`、`%=`：复合赋值运算符，例如 `x += 5` 等同于 `x = x + 5`，其他类似，用于简化赋值操作并结合算术运算。
- **关系运算符**
    - `<`：判断左边的值是否小于右边的值，返回布尔结果。
    - `<=`：检查左边的值是否小于等于右边的值，产生布尔值。
    - `>`：确定左边的值是否大于右边的值，布尔型结果。
    - `>=`：验证左边的值是否大于等于右边的值，返回布尔值。
    - `==`：比较两个值是否相等，对于不同数据类型，相等的定义可能有所不同，结果为布尔型。
    - `!=`：判断两个值是否不相等，布尔型输出。
- **逻辑运算符**
    - `&&`：逻辑与运算符，当左右两边的条件都为真时，整个表达式才为真，采用短路求值策略，即如果左边条件为假，则不会计算右边条件。
    - `||`：逻辑或运算符，只要左右两边的条件中有一个为真，整个表达式就为真，同样具有短路求值特性，如果左边条件为真，则不会计算右边条件。
    - `!`：逻辑非运算符，对单个条件取反，将真变为假，假变为真。
- **位运算符**
    - `&`：按位与运算符，对两个整数的二进制表示进行按位与操作。
    - `|`：按位或运算符，对整数的二进制位进行按位或运算。
    - `^`：按位异或运算符，执行整数二进制位的异或操作。
    - `~`：按位取反运算符，对整数的二进制表示进行按位取反。
    - `<<`：左移运算符，将整数的二进制位向左移动指定的位数，右边用 0 填充。
    - `>>`：右移运算符，把整数的二进制位向右移动指定的位数，对于有符号整数，左边的填充位是符号位扩展。
    - `>>>`：无符号右移运算符，将无符号整数的二进制位向右移动指定的位数，左边总是补 0。
- **其他运算符**
    - `=`：赋值运算符，将右边的值赋给左边的变量或表达式。
    - `.`：用于访问对象的属性或结构体的成员变量。

### （五）标点符号

- `;`：语句结束符，用于标记一条语句的结束，表示代码执行流在此处的一个停顿和分割。
- `,`：逗号，主要用于分隔函数参数、数组元素、结构体成员初始化列表等多个相关但不同的项。
- `(` 和 `)`：括号，在表达式中用于改变运算的优先级，先计算括号内的表达式；在函数定义和调用中，用于括住函数的参数列表。
- `{` 和 `}`：花括号，用于界定代码块，如函数体、循环体、条件语句块等，明确代码的作用域和执行顺序。
- `[` 和 `]`：方括号，可能用于数组相关操作，如声明数组类型、访问数组元素等，定义数组的索引范围和操作方式。

### （六）注释

- **单行注释**：以 `//` 开头，直到行尾的所有内容都被视为注释，编译器或解释器会忽略这些注释内容，主要用于对代码进行简短的说明或临时屏蔽部分代码。
- **多行注释**：使用 `/*` 开始，`*/` 结束，中间的所有内容都为注释，可以跨越多行，适用于对较长代码段或功能模块进行详细的解释和说明。

## 三、数据类型

### （一）基本数据类型

- **整数类型**：由整数常量表示，用于存储整数值，其具体的字节大小和取值范围可能因语言实现而异。
- **浮点数类型**：用于处理带有小数部分的数值，遵循特定的浮点数表示标准和精度规则。
- **字符串类型**：由字符串常量定义，能够存储文本信息，支持各种字符串操作，如连接、截取、查找等。
- **布尔类型**：虽然在词法单元中未明确体现布尔字面量，但在条件判断、逻辑运算等场景中会产生布尔值，用于表示真（`true`）或假（
  `false`）的逻辑状态。

### （二）复合数据类型

- **结构体类型**：通过 `struct` 关键字创建，允许开发者定义包含多个不同类型成员变量的自定义数据结构。例如：

```
struct Point {
    var int x = 1;
    var int y = 1;
}
```

上述代码定义了一个名为 `Point` 的结构体，包含两个整数类型的成员变量 `x` 和 `y`。结构体的成员可以通过 `.` 运算符进行访问，如
`point.x` 和 `point.y`（假设 `point` 是 `Point` 结构体的一个实例）。

- **数组类型**：可以使用 `[` 和 `]` 来声明和操作数组。例如，`var int[3] arr;` 声明了一个整数数组。数组元素可以通过索引访问，如
  `arr[0]` 表示访问数组 `arr` 的第一个元素。数组的长度是固定的。

## 四、表达式

### （一）算术表达式


### （二）关系表达式


### （三）逻辑表达式


### （四）函数调用表达式


### （五）数组访问表达式


## 五、语句

### （一）变量声明语句

- 使用 `var` 关键字声明可变变量，语法如下：

```
var dataType variableName [= initialValue];
```

其中，`variableName` 是变量名，`dataType` 是变量的数据类型，`initialValue` 是可选的初始值。例如：`var int x = 5;`
声明了一个名为 `x` 的整数变量，并初始化为 5；`var string str;` 声明了一个字符串变量 `str`，但未初始化，其初始值将根据默认规则确定。

- 使用 `imt` 关键字声明不可变变量，语法：

```
imt dataType constantName = initialValue;
```

例如：`imt float PI = 3.14;` 声明了一个名为 `PI` 的不可变双精度浮点数变量，并初始化为 3.14。一旦声明，`PI`
的值不能被修改。

变量声明后还可以进行数组类型的声明，如 `var int[10] arr;` 声明了一个整数数组变量 `arr`。

### （二）赋值语句

赋值语句使用 `=` 运算符将右边的值赋给左边的变量或表达式。例如：`x = 10;` 将值 10 赋给变量 `x`；`arr[0] = 5;` 将 5 赋给数组
`arr` 的第一个元素。也可以使用复合赋值运算符进行更简洁的赋值操作，如 `x += 3` 等同于 `x = x + 3`。

### （三）条件语句

- **`if` 语句**：

`if` 语句可以有返回值

```
if condition {
    // 条件为真时执行的语句块
} else {
    // 条件为假时执行的语句块（可选）
}
```

例如：

```
if x > 5 {
    y = 10;
} else {
    y = 0;
}
```

上述代码首先判断 `x` 是否大于 5，如果是，则将 `y` 赋值为 10；否则将 `y` 赋值为 0。

- **`if - elif - else` 语句**：

```
if condition1 {
    // 执行块 1
} elif condition2 {
    // 执行块 2
} else {
    // 执行块 3（可选）
}
```

例如：

```
if score >= 90 {
    grade = "A";
} elif score >= 80 {
    grade = "B";
} elif score >= 70 {
    grade = "C";
} else {
    grade = "D";
}
```

此代码根据 `score` 的值来确定 `grade` 的等级，依次判断多个条件，一旦某个条件满足，则执行相应的语句块并跳过后续的条件判断。

### （四）循环语句

- **`for` 循环**：

```
for initialization; condition; increment {
    // 循环体
}
```

例如：

```
for int i = 0; i < 10; i++ {
    // 循环体操作，例如打印当前索引值
    print(i);
}
```

在这个 `for` 循环中，首先进行初始化 `int i = 0`，然后判断条件 `i < 10`，如果条件为真，则执行循环体中的代码，最后执行增量操作
`i++`。循环会不断重复这个过程，直到条件不满足为止。

### （五）函数声明语句

```
fun functionName(parameterList) [returnType] {
    // 函数体
    return returnValue; // 可选，如果函数有返回值
}
```

例如：

```
fun add(imt int x, var int y): INT_TOKEN {
    return x + y;
}
```

上述代码定义了一个名为 `add` 的函数，它接受两个整数参数 `x` 和 `y`
，并返回它们的和。函数体中的代码在函数被调用时执行，执行完毕后根据函数的定义返回一个值（如果有返回值声明）或结束函数执行（如果无返回值声明）。

### （六）返回语句

- 使用 `return` 关键字从函数中返回值。如果函数有返回值，语法为 `return expression;`，例如 `return x + y;`。如果函数无返回值，可以只使用
  `return;` 来结束函数的执行并返回控制流到函数调用处。

### （七）结构体声明语句

```
struct structName {
    // 结构体成员变量声明
}
```

如前面提到的 `struct Point` 示例，结构体声明定义了一种新的数据类型，包含特定的成员变量。结构体可以在程序中用于创建具有相关属性的对象或数据集合，提高代码的组织性和可读性。

### （八）包含语句

- `include` 语句用于引入外部文件或模块，语法为 `include packageName.fileName;`。这有助于代码的模块化和复用，将功能分散到不同的文件或模块中，便于维护和管理。

### （九）包语句

- `package` 语句与程序包相关操作，语法为 `package packageName;`。用于组织代码的命名空间.